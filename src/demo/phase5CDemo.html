<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 5C Demo - Automation Systems</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .demo-header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .demo-header h1 {
            font-size: 3em;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #fff, #f0f0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .demo-header p {
            font-size: 1.3em;
            opacity: 0.95;
            margin: 10px 0;
        }
        
        .phase-banner {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 15px 30px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
            font-size: 1.2em;
            box-shadow: 0 8px 25px rgba(255,107,107,0.3);
            animation: glow 2s infinite alternate;
        }
        
        @keyframes glow {
            0% { box-shadow: 0 8px 25px rgba(255,107,107,0.3); }
            100% { box-shadow: 0 12px 35px rgba(255,107,107,0.5); }
        }
        
        .automation-showcase {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .automation-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 3px solid transparent;
            background-clip: padding-box;
            position: relative;
            overflow: hidden;
        }
        
        .automation-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #667eea, #764ba2, #ff6b6b, #ee5a24);
            z-index: -1;
            margin: -3px;
            border-radius: inherit;
        }
        
        .automation-card h3 {
            margin: 0 0 15px 0;
            color: #1e293b;
            font-size: 1.4em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .automation-card .card-icon {
            font-size: 2em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
            margin: 15px 0;
        }
        
        .feature-list li {
            display: flex;
            align-items: center;
            margin: 8px 0;
            font-size: 0.95em;
        }
        
        .feature-list li::before {
            content: '✅';
            margin-right: 10px;
            font-size: 1.1em;
        }
        
        .demo-controls {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .demo-controls h3 {
            margin-top: 0;
            color: #1e293b;
            font-size: 1.4em;
            text-align: center;
        }
        
        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .demo-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1em;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .demo-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .demo-btn:hover::before {
            left: 100%;
        }
        
        .demo-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        
        .demo-btn.ai {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }
        
        .demo-btn.cashier {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        
        .demo-btn.inventory {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }
        
        .demo-container {
            background: rgba(255,255,255,0.98);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-height: 600px;
            position: relative;
        }
        
        .demo-status {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        
        .progress-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.95);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        
        .progress-bar {
            width: 200px;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            width: 100%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            z-index: 1001;
            animation: achievementSlide 0.5s ease-out;
        }
        
        @keyframes achievementSlide {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 20px;
            z-index: 10;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid #e5e7eb;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .demo-header h1 {
                font-size: 2.2em;
            }
            
            .automation-showcase,
            .control-grid {
                grid-template-columns: 1fr;
            }
            
            .progress-indicator {
                position: relative;
                top: auto;
                right: auto;
                margin-bottom: 20px;
            }
        }
    </style>
    
    <!-- Include all automation system files -->
    <link rel="stylesheet" href="../styles/automation.css">
</head>
<body>
    <div class="progress-indicator">
        <div><strong>🤖 Automation Status</strong></div>
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>
        <div id="systemStatus">All Systems Operational</div>
    </div>

    <div class="demo-header">
        <h1>🤖 Phase 5C: Automation Systems</h1>
        <p><strong>Intelligent Store Management Automation</strong></p>
        <div class="phase-banner">
            🚀 AUTOMATION PILOT ENGAGED - FULL SYSTEM INTEGRATION COMPLETE
        </div>
    </div>

    <div class="automation-showcase">
        <div class="automation-card">
            <h3><span class="card-icon">🧠</span>AI Assistant Manager</h3>
            <ul class="feature-list">
                <li>Strategic decision support and analysis</li>
                <li>Real-time performance monitoring</li>
                <li>Intelligent recommendations engine</li>
                <li>Adaptive learning from outcomes</li>
                <li>Risk assessment and mitigation</li>
            </ul>
        </div>

        <div class="automation-card">
            <h3><span class="card-icon">🤖</span>Automated Cashier</h3>
            <ul class="feature-list">
                <li>AI-powered customer service</li>
                <li>Natural conversation processing</li>
                <li>Automatic upselling and recommendations</li>
                <li>Payment processing automation</li>
                <li>Customer satisfaction tracking</li>
            </ul>
        </div>

        <div class="automation-card">
            <h3><span class="card-icon">📦</span>Smart Inventory Management</h3>
            <ul class="feature-list">
                <li>Predictive restocking algorithms</li>
                <li>Demand forecasting and trend analysis</li>
                <li>Automatic reorder point calculation</li>
                <li>Seasonal adjustment factors</li>
                <li>Cost optimization and budget control</li>
            </ul>
        </div>

        <div class="automation-card">
            <h3><span class="card-icon">🛡️</span>Security Monitoring</h3>
            <ul class="feature-list">
                <li>AI-powered surveillance system</li>
                <li>Threat detection and alerts</li>
                <li>Incident response automation</li>
                <li>Customer behavior analysis</li>
                <li>Loss prevention optimization</li>
            </ul>
        </div>

        <div class="automation-card">
            <h3><span class="card-icon">🔧</span>Maintenance Automation</h3>
            <ul class="feature-list">
                <li>Scheduled cleaning and maintenance</li>
                <li>Equipment health monitoring</li>
                <li>Predictive maintenance alerts</li>
                <li>Energy efficiency optimization</li>
                <li>Emergency response protocols</li>
            </ul>
        </div>

        <div class="automation-card">
            <h3><span class="card-icon">📊</span>Performance Analytics</h3>
            <ul class="feature-list">
                <li>Real-time efficiency metrics</li>
                <li>Quality score tracking</li>
                <li>Cost-benefit analysis</li>
                <li>ROI calculation and optimization</li>
                <li>Predictive performance modeling</li>
            </ul>
        </div>
    </div>

    <div class="demo-controls">
        <h3>🎮 Automation Control Center</h3>
        <div class="control-grid">
            <button class="demo-btn ai" onclick="testAIAssistant()">
                🧠 Test AI Assistant Decision Making
            </button>
            <button class="demo-btn cashier" onclick="simulateAutomatedTransaction()">
                🤖 Simulate Automated Customer Service
            </button>
            <button class="demo-btn inventory" onclick="runInventoryAutomation()">
                📦 Run Smart Inventory Analysis
            </button>
            <button class="demo-btn" onclick="enableAllAutomation()">
                ⚡ Enable All Automation Systems
            </button>
            <button class="demo-btn" onclick="showPerformanceReport()">
                📈 View Performance Analytics
            </button>
            <button class="demo-btn" onclick="emergencyShutdown()">
                🚨 Emergency Shutdown
            </button>
        </div>
    </div>

    <div class="demo-status" id="demoStatus">
        🎯 Phase 5C Automation Systems ready for testing!
    </div>

    <div class="demo-container" id="automationDemo">
        <div class="loading-overlay" id="loadingOverlay">
            <div style="text-align: center;">
                <div class="loading-spinner"></div>
                <h3 style="margin-top: 20px; color: #667eea;">Initializing Automation Systems...</h3>
                <p>Loading AI Assistant, Automated Cashier, and Smart Inventory...</p>
            </div>
        </div>
    </div>

    <!-- Include automation system dependencies -->
    <script src="../systems/aiAssistantManager.js"></script>
    <script src="../systems/automatedCashierSystem.js"></script>
    <script src="../systems/automatedInventorySystem.js"></script>
    <script src="../systems/automationSystem.js"></script>
    <script src="../interfaces/automationInterface.js"></script>

    <script>
        // Mock game state for Phase 5C demo
        const mockGameState = {
            staff: {
                employees: [
                    { id: 'emp_001', name: 'Sarah Johnson', role: { id: 'cashier', title: 'Cashier' }, performance: { overallRating: 85 } },
                    { id: 'emp_002', name: 'Mike Chen', role: { id: 'stocker', title: 'Stocker' }, performance: { overallRating: 78 } }
                ]
            },
            inventory: {
                'product_001': { name: 'Cola', quantity: 15, maxStock: 50, cost: 2 },
                'product_002': { name: 'Chips', quantity: 8, maxStock: 30, cost: 3 }
            },
            store: { cash: 5000, revenue: 1200 },
            customerSystem: { generateCustomer: () => ({ name: 'Demo Customer', cart: [{ id: 'product_001', price: 3 }] }) },
            inventorySystem: { checkStock: () => true },
            timeSystem: { getCurrentTime: () => Date.now() },
            npcSystem: { generateNPC: async () => ({ name: 'AI Customer' }) },
            aiContentManager: { generateContent: async () => ({ content: 'AI generated content' }) }
        };

        const mockEventBus = {
            events: {},
            on: function(event, callback) {
                if (!this.events[event]) this.events[event] = [];
                this.events[event].push(callback);
            },
            emit: function(event, data) {
                if (this.events[event]) {
                    this.events[event].forEach(callback => callback(data));
                }
            }
        };

        let automationSystem;
        let automationInterface;

        // Initialize automation systems
        async function initializeAutomationDemo() {
            console.log('🚀 Initializing Phase 5C Automation Demo...');
            
            try {
                automationSystem = new AutomationSystem();
                automationInterface = new AutomationInterface();
                
                await automationSystem.initialize(
                    mockGameState,
                    mockEventBus,
                    null, // staffSystem
                    mockGameState.customerSystem,
                    mockGameState.inventorySystem
                );
                
                await automationInterface.initialize(
                    automationSystem,
                    mockGameState,
                    mockEventBus
                );
                
                // Hide loading overlay
                document.getElementById('loadingOverlay').style.display = 'none';
                
                // Render automation interface
                document.getElementById('automationDemo').innerHTML = automationInterface.render();
                
                updateStatus('Phase 5C Automation Systems fully operational! 🎯');
                
                console.log('✅ Automation demo initialized successfully!');
                
            } catch (error) {
                console.error('❌ Error initializing automation demo:', error);
                updateStatus('Error initializing automation systems 😞');
            }
        }

        // Demo functions
        async function testAIAssistant() {
            updateStatus('🧠 AI Assistant analyzing strategic decision...');
            
            const decision = {
                id: 'demo_decision_' + Date.now(),
                type: 'pricing',
                context: { product: 'Cola', currentPrice: 3 }
            };
            
            const analysis = await automationSystem.aiAssistant.analyzeDecision(decision);
            
            showAchievement('🧠 AI Assistant', `Recommendation: ${analysis.recommendations[0]?.action || 'Optimize pricing'}`);
            updateStatus(`AI Assistant provided strategic recommendation! Confidence: ${Math.round(analysis.confidence * 100)}%`);
        }

        async function simulateAutomatedTransaction() {
            updateStatus('🤖 Processing automated customer transaction...');
            
            const customer = mockGameState.customerSystem.generateCustomer();
            const transaction = await automationSystem.automatedCashier.handleCustomer(customer);
            
            if (transaction) {
                showAchievement('🤖 Automated Cashier', 'Customer transaction processed successfully!');
                updateStatus(`Automated transaction completed! Customer: ${customer.name}`);
            }
        }

        async function runInventoryAutomation() {
            updateStatus('📦 Running smart inventory analysis...');
            
            await automationSystem.inventoryBot.performInventoryCheck();
            
            showAchievement('📦 Smart Inventory', 'Inventory analysis complete - restock recommendations generated!');
            updateStatus('Smart inventory system identified optimization opportunities! 📈');
        }

        function enableAllAutomation() {
            updateStatus('⚡ Enabling all automation systems...');
            
            const systems = ['customerService', 'inventory', 'maintenance', 'security', 'aiAssistant'];
            
            systems.forEach(system => {
                automationSystem.enableAutomation(system);
            });
            
            showAchievement('⚡ Full Automation', 'All systems now running autonomously!');
            updateStatus('🎯 All automation systems active! Store running at maximum efficiency!');
        }

        function showPerformanceReport() {
            const status = automationSystem.getAutomationStatus();
            
            const report = `
📊 Automation Performance Report:
• Active Systems: ${status.active.length}/${status.totalSystems}
• Efficiency Gain: ${Math.round(status.efficiency.timesSaved * 10)}%
• Quality Score: ${Math.round(status.quality.qualityScore * 100)}%
• ROI: ${Math.round(status.costs.roi)}%
• Cost Savings: $${status.costs.operationalSavings}
            `;
            
            alert(report);
            updateStatus('📈 Performance report generated successfully!');
        }

        function emergencyShutdown() {
            if (confirm('Are you sure you want to shut down all automation systems?')) {
                automationSystem.emergencyShutdown('Demo emergency shutdown');
                showAchievement('🚨 Emergency Shutdown', 'All automation systems safely shut down');
                updateStatus('🛑 Emergency shutdown complete - manual control restored');
            }
        }

        function updateStatus(message) {
            document.getElementById('demoStatus').textContent = message;
            document.getElementById('systemStatus').textContent = message.replace(/[🎯🧠🤖📦⚡📈🛑]/g, '').trim();
            console.log('📢 Demo Status:', message);
        }

        function showAchievement(title, message) {
            const popup = document.createElement('div');
            popup.className = 'achievement-popup';
            popup.innerHTML = `
                <h3>${title}</h3>
                <p>${message}</p>
                <button onclick="this.parentElement.remove()" style="
                    background: rgba(255,255,255,0.2); 
                    border: 1px solid rgba(255,255,255,0.3); 
                    color: white; 
                    padding: 8px 16px; 
                    border-radius: 6px; 
                    cursor: pointer;
                    margin-top: 15px;
                ">Close</button>
            `;
            
            document.body.appendChild(popup);
            
            setTimeout(() => {
                if (popup.parentElement) {
                    popup.remove();
                }
            }, 5000);
        }

        // Initialize demo when page loads
        window.addEventListener('load', () => {
            setTimeout(initializeAutomationDemo, 1000);
        });

        console.log(`
🤖 Phase 5C: Automation Systems Demo
====================================
Features Available:
- AI Assistant Manager with strategic analysis
- Automated Cashier with conversation AI
- Smart Inventory with predictive analytics
- Security Monitoring with threat detection
- Maintenance Automation with scheduling
- Performance Analytics with real-time metrics

Click the demo buttons to test each system!
        `);
    </script>
</body>
</html>
